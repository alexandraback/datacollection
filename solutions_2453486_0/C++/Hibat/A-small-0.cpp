#include<conio.h>
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

int main(){
  int n,l,j,i,gain=0,joueur,T[4][4];
  char a;
     FILE* in = NULL;
     FILE* out = NULL;
    in = fopen("A-small-0.in", "r");
    out = fopen("A-small-0.out", "w");
   fscanf(in, "%d", &n);
   fgetc(in);
    for(l=0;l<n;l++){
                     for(j=0;j<4;j++){
                                      for(i=0;i<4;i++){a=getc(in);
                                             T[j][i]=2;
                                                  if(a==84) T[j][i]=0;
                                                  if(a==88) T[j][i]=1;
                                                  if(a==79) T[j][i]=-1;
                                    
                                                       }
                                                       
                                      getc(in);
                                      }
                                      getc(in);
                                      gain=0;
    fprintf(out,"Case #%d: ",l+1);            
     if( gain==0 && (T[0][0]==0 || T[0][0]==1) && (T[1][0]==0 || T[1][0]==1)  && (T[2][0]==0 || T[2][0]==1) && (T[3][0]==0 || T[3][0]==1)){
         fprintf(out,"X won");
         gain=1;}
      if( gain==0 && (T[0][0]==0 || T[0][0]==-1) && (T[1][0]==0 || T[1][0]==-1)  && (T[2][0]==0 || T[2][0]==-1) && (T[3][0]==0 || T[3][0]==-1)){
         fprintf(out,"O won");
         gain=1;}    
       if( gain==0 && (T[0][1]==0 || T[0][1]==1) && (T[1][1]==0 || T[1][1]==1)  && (T[2][1]==0 || T[2][1]==1) && (T[3][1]==0 || T[3][1]==1)){
         fprintf(out,"X won");
         gain=1;}
         if( gain==0 && (T[0][1]==0 || T[0][1]==-1) && (T[1][1]==0 || T[1][1]==-1)  && (T[2][1]==0 || T[2][1]==-1) && (T[3][1]==0 || T[3][1]==-1)){
         fprintf(out,"O won");
         gain=1;}
       if( gain==0 && (T[0][2]==0 || T[0][2]==1) && (T[1][2]==0 || T[1][2]==1)  && (T[2][2]==0 || T[2][2]==1) && (T[3][2]==0 || T[3][2]==1)){
         fprintf(out,"X won");
         gain=1;}
       if( gain==0 && (T[0][2]==0 || T[0][2]==-1) && (T[1][2]==0 || T[1][2]==-1)  && (T[2][2]==0 || T[2][2]==-1) && (T[3][2]==0 || T[3][2]==-1)){
         fprintf(out,"O won");
         gain=1;}
       if( gain==0 && (T[0][3]==0 || T[0][3]==1) && (T[1][3]==0 || T[1][3]==1)  && (T[2][3]==0 || T[2][3]==1) && (T[3][3]==0 || T[3][3]==1)){
         fprintf(out,"X won");
         gain=1;}    
       if( gain==0 && (T[0][3]==0 || T[0][3]==-1) && (T[1][3]==0 || T[1][3]==-1)  && (T[2][3]==0 || T[2][3]==-1) && (T[3][3]==0 || T[3][3]==-1)){
         fprintf(out,"O won");
         gain=1;}    
       if( gain==0 && (T[0][0]==0 || T[0][0]==1) && (T[0][1]==0 || T[0][1]==1)  && (T[0][2]==0 || T[0][2]==1) && (T[0][3]==0 || T[0][3]==1)){
         fprintf(out,"X won");
         gain=1;}        
       if( gain==0 && (T[0][0]==0 || T[0][0]==-1) && (T[0][1]==0 || T[0][1]==-1)  && (T[0][2]==0 || T[0][2]==-1) && (T[0][3]==0 || T[0][3]==-1)){
         fprintf(out,"O won");
         gain=1;}  
        if( gain==0 && (T[1][0]==0 || T[1][0]==1) && (T[1][1]==0 || T[1][1]==1)  && (T[1][2]==0 || T[1][2]==1) && (T[1][3]==0 || T[1][3]==1)){
         fprintf(out,"X won");
         gain=1;}
         if( gain==0 && (T[1][0]==0 || T[1][0]==-1) && (T[1][1]==0 || T[1][1]==-1)  && (T[1][2]==0 || T[1][2]==-1) && (T[1][3]==0 || T[1][3]==-1)){
         fprintf(out,"O won");
         gain=1;}   
         if( gain==0 && (T[2][0]==0 || T[2][0]==1) && (T[2][1]==0 || T[2][1]==1)  && (T[2][2]==0 || T[2][2]==1) && (T[2][3]==0 || T[2][3]==1)){
         fprintf(out,"X won");
         gain=1;}             
         if( gain==0 && (T[2][0]==0 || T[2][0]==-1) && (T[2][1]==0 || T[2][1]==-1)  && (T[2][2]==0 || T[2][2]==-1) && (T[2][3]==0 || T[2][3]==-1)){
         fprintf(out,"O won");
         gain=1;}
         if( gain==0 && (T[3][0]==0 || T[3][0]==1) && (T[3][1]==0 || T[3][1]==1)  && (T[3][2]==0 || T[3][2]==1) && (T[3][3]==0 || T[3][3]==1)){
         fprintf(out,"X won");
         gain=1;}         
         if( gain==0 && (T[3][0]==0 || T[3][0]==-1) && (T[3][1]==0 || T[3][1]==-1)  && (T[3][2]==0 || T[3][2]==-1) && (T[3][3]==0 || T[3][3]==-1)){
         fprintf(out,"O won");
         gain=1;}      
         if( gain==0 && (T[0][0]==0 || T[0][0]==1) && (T[1][1]==0 || T[1][1]==1)  && (T[2][2]==0 || T[2][2]==1) && (T[3][3]==0 || T[3][3]==1)){
         fprintf(out,"X won");
         gain=1;}        
         if( gain==0 && (T[0][0]==0 || T[0][0]==-1) && (T[1][1]==0 || T[1][1]==-1)  && (T[2][2]==0 || T[2][2]==-1) && (T[3][3]==0 || T[3][3]==-1)){
         fprintf(out,"O won");
         gain=1;} 
         if( gain==0 && (T[0][3]==0 || T[0][3]==1) && (T[1][2]==0 || T[1][2]==1)  && (T[2][1]==0 || T[2][1]==1) && (T[3][0]==0 || T[3][0]==1)){
         fprintf(out,"X won");
         gain=1;}    
         if( gain==0 && (T[0][3]==0 || T[0][3]==-1) && (T[1][2]==0 || T[1][2]==-1)  && (T[2][1]==0 || T[2][1]==-1) && (T[3][0]==0 || T[3][0]==-1)){
         fprintf(out,"O won");
         gain=1;}
         
         if(gain==0){ for(j=0;j<4;j++){
                                      for(i=0;i<4;i++){
                                                       if(T[j][i]==2) gain=-1;}
                                      }
                     if(gain==0) fprintf(out,"Draw");
                     else{ fprintf(out,"Game has not completed");}
                     }
       if(l!=n) fprintf(out,"\n");
                            }
    fclose(in);
    fclose(out);
}
